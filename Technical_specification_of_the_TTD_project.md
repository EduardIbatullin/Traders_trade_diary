
# **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ (–¢–ó) –ø–æ –ø—Ä–æ–µ–∫—Ç—É: –û–Ω–ª–∞–π–Ω-–¥–Ω–µ–≤–Ω–∏–∫ —Å–¥–µ–ª–æ–∫ –Ω–∞ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–µ (–°–±–µ—Ä)**

*–í–µ—Ä—Å–∏—è: –∞–≤–≥—É—Å—Ç 2025*

---

## **1. –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ**

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ —É—á—ë—Ç–∞, –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤–µ–¥–µ–Ω–∏—è **–¥–Ω–µ–≤–Ω–∏–∫–∞ —Å–¥–µ–ª–æ–∫** –Ω–∞ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–µ (–°–±–µ—Ä–±–∞–Ω–∫).
–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –¥–Ω–µ–≤–Ω–∏–∫–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç, –¥–µ–ª–∞–µ—Ç –ø–æ–º–µ—Ç–∫–∏, —Å—Ç—Ä–æ–∏—Ç –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã —Å –ø–æ–∑–∏—Ü–∏–µ–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–∞–ø–∏—Å—è–º –¥–ª—è —Å–∞–º–æ–∞–Ω–∞–ª–∏–∑–∞.

---

## **2. –¶–µ–ª–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**

### **2.1. –ò–º–ø–æ—Ä—Ç —Å–¥–µ–ª–æ–∫**

* –ò–º–ø–æ—Ä—Ç HTML-–æ—Ç—á—ë—Ç–æ–≤ –±—Ä–æ–∫–µ—Ä–∞ –°–±–µ—Ä (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—É—Ç–æ—á–Ω—ã—Ö –∏ –º–µ—Å—è—á–Ω—ã—Ö; —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–∞).
* –ü–∞—Ä—Å–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –µ–¥–∏–Ω—ã–º –º–æ–¥—É–ª–µ–º.
* –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª —Ñ–∞–π–ª–∞ –æ—Ç—á—ë—Ç–∞ (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).

### **2.2. –†—É—á–Ω–æ–π –≤–≤–æ–¥ —Å–¥–µ–ª–æ–∫**

* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —Å–¥–µ–ª–∫–∏ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–Ω–µ–≤–Ω–∏–∫–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:

  * –ü—Ä–∏—á–∏–Ω–∞ –ø–æ–∫—É–ø–∫–∏ (–∏–¥–µ—è, —Ü–µ–ª—å)
  * –£—Ä–æ–≤–Ω–∏/—Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–∫—É–ø–æ–∫ (–ø–æ –º–µ—Ç–æ–¥–∏–∫–µ "–õ–µ—Å–µ–Ω–∫–∞", —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –°–ê–ò)
  * –ü–ª–∞–Ω —Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã—Ö –ø—Ä–æ–¥–∞–∂ (—Ü–µ–ª–∏, % –æ—Ç –ø–æ–∑–∏—Ü–∏–∏, —Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞)
  * –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ % –æ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.

### **2.3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ**

* –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –æ—Ç—á—ë—Ç–∞ –∑–∞ –¥–∞—Ç—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —É–∂–µ –µ—Å—Ç—å —Å–¥–µ–ª–∫–∏, —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–∏—Å–∫–∞ ‚Äú–ø–æ—Ö–æ–∂–∏—Ö‚Äù –æ–ø–µ—Ä–∞—Ü–∏–π:

  * –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É, —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏ **–≤—Ä–µ–º–µ–Ω–∏ —Å –¥–æ–ø—É—Å—Ç–∏–º—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (¬±12/24 —á, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ)**
  * –í—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π, –≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è)
  * –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ ‚Äú—á–µ—Ä–Ω–æ–≤–∏–∫ –∏–º–ø–æ—Ä—Ç–∞‚Äù ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–ø–∏—Å–∏ –≤–Ω–æ—Å—è—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω—É—é –ë–î

### **2.4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∞–º–∏ –∏ –ø–æ–∑–∏—Ü–∏—è–º–∏**

* –°–¥–µ–ª–∫–∏ –ø–æ –æ–¥–Ω–æ–π –±—É–º–∞–≥–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ **–ø–æ–∑–∏—Ü–∏—é**.
* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π/–∞–∫—Ç–∏–≤–æ–≤.
* –§–∏–ª—å—Ç—Ä—ã: –¥–∞—Ç–∞, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å—é –Ω–∞–±–æ—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤).

### **2.5. –î–Ω–µ–≤–Ω–∏–∫–æ–≤—ã–µ –∑–∞–º–µ—Ç–∫–∏ –∏ –º–µ—Ç–æ–¥–∏–∫–∞ "–õ–µ—Å–µ–Ω–∫–∞"**

* –ö–∞–∂–¥–∞—è —Å–¥–µ–ª–∫–∞ –∏ –∫–∞–∂–¥–∞—è –ø–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

  * –õ–∏—á–Ω—É—é –∑–∞–º–µ—Ç–∫—É (—Ç–µ–∫—Å—Ç)
  * –ü—Ä–∏—á–∏–Ω—É –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏, —Ü–µ–ª–µ–≤—É—é —Ü–µ–Ω—É, —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, —É—Ä–æ–≤–Ω–∏ –¥–ª—è –ª–µ—Å–µ–Ω–∫–∏ –ø–æ–∫—É–ø–æ–∫ –∏ –ø—Ä–æ–¥–∞–∂, –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–π % –ø–æ—Ä—Ç—Ñ–µ–ª—è
* –í –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ–∑–∏—Ü–∏–∏:

  * –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—É–º–∞–≥–µ –∏ –ø–æ–∑–∏—Ü–∏–∏
  * –¢–∞–±–ª–∏—Ü–∞ —É—Ä–æ–≤–Ω–µ–π (—Å—Ç—É–ø–µ–Ω–µ–π) –¥–ª—è –ø–æ–∫—É–ø–æ–∫/–ø—Ä–æ–¥–∞–∂ –ø–æ –º–µ—Ç–æ–¥–∏–∫–µ "–õ–µ—Å–µ–Ω–∫–∞"
  * –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π: –ø—Ä–æ—Ü–µ–Ω—Ç –¥–æ—Ö–æ–¥–∞ –¥–æ —Ü–µ–ª–∏, —Ç–µ–∫—É—â–∏–π –¥–æ—Ö–æ–¥ –≤ %, —Ä—É–±–ª—è—Ö, —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏, –¥–æ—Ö–æ–¥ –ø–æ –ø—Ä–æ–¥–∞–∂–µ (FIFO –∏ —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π)
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ç–µ–≥–æ–≤ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### **2.6. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**

* –í MVP: –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –ø–æ –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏ (FIFO, —É—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–π), –ø–æ —Å–¥–µ–ª–∫–∞–º, –ø–æ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏, –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–¥–µ–ª–∫–µ
* –ó–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–∏–¥–æ–≤ –æ—Ç—á—ë—Ç–æ–≤, –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –¥—Ä.)

### **2.7. –≠–∫—Å–ø–æ—Ä—Ç**

* –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –¥–∞–Ω–Ω—ã—Ö (JSON/CSV/–∞—Ä—Ö–∏–≤ ‚Äî —É—Ç–æ—á–Ω—è–µ—Ç—Å—è –ø–æ —Ö–æ–¥—É)

### **2.8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏**

* –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
* –†–æ–ª–∏: User (–æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å), Admin (–¥–æ–ø. –ø—Ä–∞–≤–∞ ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
* –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π (–∏–º–ø–æ—Ä—Ç, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –¥—Ä.)
* –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –∑–∞–ª–æ–∂–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (Google, –Ø–Ω–¥–µ–∫—Å –∏ –¥—Ä.) ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –±—É–¥—É—â–µ–º.

### **2.9. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ—Ç–∏—Ä–æ–≤–æ–∫**

* –ü–æ–¥–≥—Ä—É–∑–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω –∞–∫—Ü–∏–π —Å MOEX –ø–æ REST API
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º/—Å–¥–µ–ª–∫–∞–º

### **2.10. –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –∑–∞–º–µ—Ç–æ–∫**

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞ —á–µ—Ä–µ–∑ Web Speech API (–±—Ä–∞—É–∑–µ—Ä)
* –ö–Ω–æ–ø–∫–∞ üé§ –≤–æ–∑–ª–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è –∑–∞–º–µ—Ç–∫–∏: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∏–∫—Ç—É–µ—Ç —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è –∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–º–µ—Ç–∫—É (–∞—É–¥–∏–æ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è)
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

---

## **3. –ö–ª—é—á–µ–≤—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞**

* –í—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞, FIFO, —É—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–π, –ª–µ—Å–µ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂) —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –Ω–∞ backend.
* –ü–∞—Ä—Å–µ—Ä HTML-–æ—Ç—á—ë—Ç–æ–≤ —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–∞—Ö –°–±–µ—Ä (–æ–±—Ä–∞–∑—Ü—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).
* –°–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ (–Ω–∏–∫–∞–∫–∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–º–µ–Ω –±–µ–∑ —Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
* –£—á–µ—Ç —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–¥–µ–ª–æ–∫).
* –í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã —Å –ø—Ä–∏—Ü–µ–ª–æ–º –Ω–∞ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å (–Ω–æ–≤—ã–µ –ø–æ–ª—è, –≤–∏–¥—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏).

---

## **4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (—Å—É—â–Ω–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–∏, –∫—Ä–∞—Ç–∫–æ)**

* **User**
* **OAuthAccount** *(–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã)*
* **UserSettings**
* **Position**
* **Trade**
* **Note**
* **BrokerReportFile**
* **ImportDraft**
* **ActionLog**

---

## **5. ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ (–æ–ø–∏—Å–∞–Ω–∏–µ —Å–≤—è–∑–µ–π)**

```
User
 ‚îú‚îÄ< OAuthAccount
 ‚îú‚îÄ< Trade
 ‚îÇ      ‚îú‚îÄ< Note
 ‚îÇ      ‚îî‚îÄ< Position >‚îÄ< Note
 ‚îú‚îÄ< BrokerReportFile >‚îÄ< ImportDraft
 ‚îú‚îÄ< ActionLog
 ‚îî‚îÄ< UserSettings
```

---

## **dbdiagram.io —Å—Ö–µ–º–∞**

```dbml
Table users {
  id serial [primary key]
  email varchar [unique, not null]
  username varchar
  password_hash varchar [not null]
  role varchar [not null] // admin, user
  timezone varchar
  created_at timestamp
  updated_at timestamp
}

Table oauth_accounts {
  id serial [primary key]
  user_id int [ref: > users.id]
  provider varchar [not null] // google, yandex, vk –∏ –¥—Ä.
  provider_user_id varchar [not null]
  provider_email varchar
  access_token varchar
  refresh_token varchar
  created_at timestamp
  updated_at timestamp
}

Table user_settings {
  id serial [primary key]
  user_id int [ref: > users.id, unique]
  compare_time_window_hours int
  other_settings jsonb
}

Table positions {
  id serial [primary key]
  user_id int [ref: > users.id]
  instrument varchar [not null]
  avg_price numeric
  quantity_total numeric
  total_commission numeric
  total_profit_loss_value numeric
  total_profit_loss_percent numeric
  note_id int [ref: - notes.id]
  created_at timestamp
  updated_at timestamp
}

Table trades {
  id serial [primary key]
  user_id int [ref: > users.id]
  position_id int [ref: > positions.id]
  instrument varchar [not null]
  trade_date timestamp
  operation varchar
  quantity numeric
  price numeric
  commission numeric
  profit_loss_value numeric
  profit_loss_percent numeric
  source varchar
  broker_report_file_id int [ref: > broker_report_files.id]
  note_id int [ref: - notes.id]
  created_at timestamp
  updated_at timestamp
}

Table notes {
  id serial [primary key]
  user_id int [ref: > users.id]
  trade_id int [ref: - trades.id]
  position_id int [ref: - positions.id]
  text text
  category varchar
  created_at timestamp
  updated_at timestamp
}

Table broker_report_files {
  id serial [primary key]
  user_id int [ref: > users.id]
  file_path varchar
  report_type varchar
  report_period_start date
  report_period_end date
  imported_at timestamp
  import_status varchar
}

Table import_drafts {
  id serial [primary key]
  user_id int [ref: > users.id]
  broker_report_file_id int [ref: > broker_report_files.id]
  draft_trades jsonb
  matching_candidates jsonb
  created_at timestamp
  resolved boolean
}

Table action_logs {
  id serial [primary key]
  user_id int [ref: > users.id]
  action_type varchar
  object_type varchar
  object_id int
  old_value jsonb
  new_value jsonb
  timestamp timestamp
}
```

---

## **6. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫**

* **Backend**: Python (FastAPI), SQLAlchemy + Alembic, PostgreSQL, BeautifulSoup/lxml –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, JWT –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, Pytest –¥–ª—è —Ç–µ—Å—Ç–æ–≤.
* **Frontend**: React/Next.js, Material UI/Ant Design, Web Speech API (–¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞), Recharts/Chart.js (–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏).
* **DevOps**: Docker, GitHub, CI/CD (GitHub Actions).

---

## **7. –û—Å–æ–±—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**

* –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –ø–æ–¥ –æ–±–∞ —Ç–∏–ø–∞ –æ—Ç—á—ë—Ç–∞ (—Å—É—Ç–æ—á–Ω—ã–π/–º–µ—Å—è—á–Ω—ã–π).
* "–ß–µ—Ä–Ω–æ–≤–∏–∫ –∏–º–ø–æ—Ä—Ç–∞" –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å–ª–∏—è–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ.
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏ –ª–æ–≥–∏–∫–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–¥–µ–ª–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–ü–ö, —Å–º–∞—Ä—Ç—Ñ–æ–Ω).
* –§–æ–∫—É—Å –Ω–∞ UX: —É–¥–æ–±—Å—Ç–≤–æ –≤–≤–æ–¥–∞, –¥–Ω–µ–≤–Ω–∏–∫–æ–≤—ã–µ –ø–æ–ª—è ‚Äî –≤—Å–µ–≥–¥–∞ "–Ω–∞ –≤–∏–¥—É", –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ, –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥.
* –ó–∞–ª–æ–∂–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OAuth (Google, –Ø–Ω–¥–µ–∫—Å –∏ –¥—Ä.), –Ω–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

---

## **8. –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (—Ç–∞–±–ª–∏—Ü/—Å—É—â–Ω–æ—Å—Ç–µ–π) —Å–æ–≥–ª–∞—Å–Ω–æ ER-–¥–∏–∞–≥—Ä–∞–º–º–µ**

–î–ª—è –∫–∞–∂–¥–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω—ã:

* –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
* –ü–æ–ª—è (–∏–º—è, —Ç–∏–ø, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
* –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
* –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏/—Å–≤—è–∑–∏
* –û—Å–æ–±—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

### **1. User (`users`)**

| –ü–æ–ª–µ           | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è              | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
| -------------- | --------- | ------------------------ | ---------------------------------------- |
| id             | serial    | PK, unique               | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è    |
| email          | varchar   | not null, unique         | E-mail, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Ö–æ–¥–∞           |
| username       | varchar   |                          | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è            |
| password\_hash | varchar   | not null                 | –•–µ—à –ø–∞—Ä–æ–ª—è                               |
| role           | varchar   | not null, default='user' | –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 'user', 'admin'       |
| timezone       | varchar   |                          | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'Europe/Moscow') |
| created\_at    | timestamp | default=now()            | –î–∞—Ç–∞/–≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏                   |
| updated\_at    | timestamp | on update                | –î–∞—Ç–∞/–≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è |

**–°–≤—è–∑–∏:**

* 1 –∫–æ –º–Ω–æ–≥–∏–º: trades, positions, notes, broker\_report\_files, import\_drafts, action\_logs, oauth\_accounts
* 1 –∫ 1: user\_settings

---

### **2. OAuthAccount (`oauth_accounts`)** *(–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)*

| –ü–æ–ª–µ               | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è   | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
| ------------------ | --------- | ------------- | ------------------------------------------------ |
| id                 | serial    | PK, unique    | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø–∏—Å–∏                             |
| user\_id           | int       | not null, FK  | –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                           |
| provider           | varchar   | not null      | –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (google, yandex, vk –∏ –¥—Ä.) |
| provider\_user\_id | varchar   | not null      | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞                     |
| provider\_email    | varchar   |               | Email —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)               |
| access\_token      | varchar   |               | –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞                                    |
| refresh\_token     | varchar   |               | Refresh-—Ç–æ–∫–µ–Ω (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)                    |
| created\_at        | timestamp | default=now() | –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å                           |
| updated\_at        | timestamp | on update     | –ö–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å                           |

**–°–≤—è–∑–∏:**

* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å user

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –í MVP —Ç–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ë–î, –Ω–æ –ª–æ–≥–∏–∫–∞ OAuth –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è.

---

### **3. UserSettings (`user_settings`)**

| –ü–æ–ª–µ                         | –¢–∏–ø    | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è          | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
| ---------------------------- | ------ | -------------------- | ----------------------------------------------------- |
| id                           | serial | PK, unique           | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID                                         |
| user\_id                     | int    | not null, unique, FK | –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                                |
| compare\_time\_window\_hours | int    | default=24           | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ, –≤ —á–∞—Å–∞—Ö        |
| other\_settings              | jsonb  |                      | –ü—Ä–æ—á–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏) |

**–°–≤—è–∑–∏:**

* 1 –∫ 1 —Å user

---

### **4. Position (`positions`)**

| –ü–æ–ª–µ                         | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è   | –û–ø–∏—Å–∞–Ω–∏–µ                               |
| ---------------------------- | --------- | ------------- | -------------------------------------- |
| id                           | serial    | PK, unique    | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–∑–∏—Ü–∏–∏                  |
| user\_id                     | int       | not null, FK  | –í–ª–∞–¥–µ–ª–µ—Ü –ø–æ–∑–∏—Ü–∏–∏                       |
| instrument                   | varchar   | not null      | –¢–∏–∫–µ—Ä –∏–ª–∏ –∫–æ–¥ –±—É–º–∞–≥–∏                   |
| avg\_price                   | numeric   |               | –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞ (—Ä–∞—Å—á–µ—Ç–Ω–æ–µ –ø–æ–ª–µ)    |
| quantity\_total              | numeric   |               | –¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ –ø–æ–∑–∏—Ü–∏–∏ (–ª–æ—Ç—ã/—à—Ç.)  |
| total\_commission            | numeric   |               | –û–±—â–∞—è –∫–æ–º–∏—Å—Å–∏—è –ø–æ –≤—Å–µ–º —Å–¥–µ–ª–∫–∞–º –ø–æ–∑–∏—Ü–∏–∏ |
| total\_profit\_loss\_value   | numeric   |               | –ò—Ç–æ–≥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –≤ —Ä—É–±–ª—è—Ö           |
| total\_profit\_loss\_percent | numeric   |               | –ò—Ç–æ–≥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –≤ %                |
| note\_id                     | int       | FK (nullable) | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏            |
| created\_at                  | timestamp | default=now() | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–∞ –ø–æ–∑–∏—Ü–∏—è                  |
| updated\_at                  | timestamp | on update     | –ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è                 |

**–°–≤—è–∑–∏:**

* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å user
* 1 –∫–æ –º–Ω–æ–≥–∏–º —Å trades
* 1 –∫–æ –º–Ω–æ–≥–∏–º —Å notes
* FK –Ω–∞ note (–≥–ª–∞–≤–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

### **5. Trade (`trades`)**

| –ü–æ–ª–µ                     | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è                | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
| ------------------------ | --------- | -------------------------- | -------------------------------------------------- |
| id                       | serial    | PK, unique                 | ID —Å–¥–µ–ª–∫–∏                                          |
| user\_id                 | int       | not null, FK               | –í–ª–∞–¥–µ–ª–µ—Ü —Å–¥–µ–ª–∫–∏                                    |
| position\_id             | int       | not null, FK               | –ö –∫–∞–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Å–¥–µ–ª–∫–∞                   |
| instrument               | varchar   | not null                   | –¢–∏–∫–µ—Ä                                              |
| trade\_date              | timestamp | not null                   | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–¥–µ–ª–∫–∏ (—Å —É—á–µ—Ç–æ–º timezone)            |
| operation                | varchar   | not null                   | 'buy' / 'sell'                                     |
| quantity                 | numeric   | not null                   | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (–ª–æ—Ç—ã/—à—Ç.)                              |
| price                    | numeric   | not null                   | –¶–µ–Ω–∞ –∑–∞ 1 –ª–æ—Ç/—à—Ç.                                  |
| commission               | numeric   |                            | –ö–æ–º–∏—Å—Å–∏—è –ø–æ —Å–¥–µ–ª–∫–µ                                 |
| profit\_loss\_value      | numeric   |                            | –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –ø–æ —Å–¥–µ–ª–∫–µ –≤ —Ä—É–±–ª—è—Ö (—Ä–∞—Å—á–µ—Ç–Ω–æ–µ)          |
| profit\_loss\_percent    | numeric   |                            | –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –ø–æ —Å–¥–µ–ª–∫–µ –≤ %                           |
| source                   | varchar   | not null, default='manual' | 'manual' / 'imported'                              |
| broker\_report\_file\_id | int       | FK (nullable)              | –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª –æ—Ç—á—ë—Ç–∞ –±—Ä–æ–∫–µ—Ä–∞ (–µ—Å–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞) |
| note\_id                 | int       | FK (nullable)              | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ –ø–æ —Å–¥–µ–ª–∫–µ                         |
| created\_at              | timestamp | default=now()              | –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞                                    |
| updated\_at              | timestamp | on update                  | –ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∞                                     |

**–°–≤—è–∑–∏:**

* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å user
* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å position
* 1 –∫–æ –º–Ω–æ–≥–∏–º —Å notes
* FK –Ω–∞ broker\_report\_file (–µ—Å–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞)
* FK –Ω–∞ note (–≥–ª–∞–≤–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ –ø–æ —Å–¥–µ–ª–∫–µ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

### **6. Note (`notes`)**

| –ü–æ–ª–µ         | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è   | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
| ------------ | --------- | ------------- | ----------------------------------------- |
| id           | serial    | PK, unique    | ID –∑–∞–º–µ—Ç–∫–∏                                |
| user\_id     | int       | not null, FK  | –í–ª–∞–¥–µ–ª–µ—Ü –∑–∞–º–µ—Ç–∫–∏                          |
| trade\_id    | int       | FK (nullable) | –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É, –µ—Å–ª–∏ –∑–∞–º–µ—Ç–∫–∞ –∫ —Å–¥–µ–ª–∫–µ   |
| position\_id | int       | FK (nullable) | –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é, –µ—Å–ª–∏ –∑–∞–º–µ—Ç–∫–∞ –∫ –ø–æ–∑–∏—Ü–∏–∏ |
| text         | text      |               | –¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏                             |
| category     | varchar   |               | –ö–∞—Ç–µ–≥–æ—Ä–∏—è/—Ç–µ–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)               |
| created\_at  | timestamp | default=now() | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–∞                             |
| updated\_at  | timestamp | on update     | –ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∞                            |

**–°–≤—è–∑–∏:**

* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å user
* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å trade (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å position (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

### **7. BrokerReportFile (`broker_report_files`)**

| –ü–æ–ª–µ                  | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è   | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
| --------------------- | --------- | ------------- | ---------------------------------------- |
| id                    | serial    | PK, unique    | ID —Ñ–∞–π–ª–∞ –æ—Ç—á—ë—Ç–∞                          |
| user\_id              | int       | not null, FK  | –í–ª–∞–¥–µ–ª–µ—Ü                                 |
| file\_path            | varchar   | not null      | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏–ª–∏ –∏–º—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ         |
| report\_type          | varchar   | not null      | –¢–∏–ø –æ—Ç—á—ë—Ç–∞: 'monthly'/'daily'            |
| report\_period\_start | date      | not null      | –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞                           |
| report\_period\_end   | date      | not null      | –ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞                            |
| imported\_at          | timestamp | default=now() | –î–∞—Ç–∞/–≤—Ä–µ–º—è –∏–º–ø–æ—Ä—Ç–∞                       |
| import\_status        | varchar   |               | –°—Ç–∞—Ç—É—Å –∏–º–ø–æ—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'ok', 'error') |

**–°–≤—è–∑–∏:**

* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å user
* 1 –∫–æ –º–Ω–æ–≥–∏–º —Å trades (–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏)
* 1 –∫ 1 —Å import\_draft

---

### **8. ImportDraft (`import_drafts`)**

| –ü–æ–ª–µ                     | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è          | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
| ------------------------ | --------- | -------------------- | -------------------------------------------------- |
| id                       | serial    | PK, unique           | ID —á–µ—Ä–Ω–æ–≤–∏–∫–∞                                       |
| user\_id                 | int       | not null, FK         | –í–ª–∞–¥–µ–ª–µ—Ü                                           |
| broker\_report\_file\_id | int       | not null, FK, unique | –ö –∫–∞–∫–æ–º—É –æ—Ç—á—ë—Ç—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è                          |
| draft\_trades            | jsonb     | not null             | –ú–∞—Å—Å–∏–≤ —Å–¥–µ–ª–æ–∫ –∏–∑ –æ—Ç—á—ë—Ç–∞ (–¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞) |
| matching\_candidates     | jsonb     |                      | –ö–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)            |
| created\_at              | timestamp | default=now()        | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω                                       |
| resolved                 | boolean   | default=false        | –ß–µ—Ä–Ω–æ–≤–∏–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω? (–¥–∞/–Ω–µ—Ç)                       |

**–°–≤—è–∑–∏:**

* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å user
* 1 –∫ 1 —Å broker\_report\_file

---

### **9. ActionLog (`action_logs`)**

| –ü–æ–ª–µ         | –¢–∏–ø       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è   | –û–ø–∏—Å–∞–Ω–∏–µ                                       |
| ------------ | --------- | ------------- | ---------------------------------------------- |
| id           | serial    | PK, unique    | ID –ª–æ–≥-–∑–∞–ø–∏—Å–∏                                  |
| user\_id     | int       | not null, FK  | –ö—Ç–æ —Å–¥–µ–ª–∞–ª –¥–µ–π—Å—Ç–≤–∏–µ                            |
| action\_type | varchar   | not null      | –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è ('import', 'edit', 'delete', ...) |
| object\_type | varchar   | not null      | –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞ ('trade', 'note', 'file', ...)     |
| object\_id   | int       | not null      | ID –æ–±—ä–µ–∫—Ç–∞                                     |
| old\_value   | jsonb     |               | –°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π/—É–¥–∞–ª–µ–Ω–∏–π)       |
| new\_value   | jsonb     |               | –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ                                 |
| timestamp    | timestamp | default=now() | –í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è                                 |

**–°–≤—è–∑–∏:**

* –ú–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å user

---

## **9. –û–ø–∏—Å–∞–Ω–∏–µ API –∏ CRUD-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**

---

### **9.1. Auth (–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, OAuth)**

#### **POST /auth/register**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–í—Ö–æ–¥:**

  ```json
  {
    "email": "user@example.com",
    "username": "Trader",
    "password": "string"
  }
  ```
* **–í—ã—Ö–æ–¥:**

  ```json
  {
    "id": 1,
    "email": "user@example.com",
    "username": "Trader"
  }
  ```
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ü–∞—Ä–æ–ª—å —Ö—ç—à–∏—Ä—É–µ—Ç—Å—è, email –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å.

---

#### **POST /auth/login**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–í—Ö–æ–¥:**

  ```json
  {
    "email": "user@example.com",
    "password": "string"
  }
  ```
* **–í—ã—Ö–æ–¥:**

  ```json
  {
    "access_token": "jwt-token",
    "token_type": "bearer"
  }
  ```
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** JWT —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 24 —á).

---

#### **GET /auth/me**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.
* **–í—ã—Ö–æ–¥:**

  ```json
  {
    "id": 1,
    "email": "user@example.com",
    "username": "Trader",
    "role": "user"
  }
  ```
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

---

#### **GET /auth/oauth/{provider}/login** *(MVP ‚Äî –∑–∞–≥–ª—É—à–∫–∞)*

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—á–∞–ª–æ OAuth-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `google`, `yandex` –∏ –¥—Ä.
* **–í—ã—Ö–æ–¥:** –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è.

---

#### **GET /auth/oauth/{provider}/callback** *(MVP ‚Äî –∑–∞–≥–ª—É—à–∫–∞)*

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
* **–í—ã—Ö–æ–¥:** JWT-—Ç–æ–∫–µ–Ω (–µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è).
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è.

---

#### **POST /auth/logout**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ JWT –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞.

---

## **9.2. User (–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)**

---

### **GET /users/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

  * –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å.
  * –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "Trader",
  "role": "user",
  "timezone": "Europe/Moscow",
  "created_at": "2025-08-08T10:00:00Z"
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.
  * –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º ‚Äî –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

---

### **PATCH /users/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è, —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å, –ø–∞—Ä–æ–ª—å).

* **–í—Ö–æ–¥:**

```json
{
  "username": "NewName",
  "timezone": "Europe/Moscow",
  "password": "newsecurepassword"
}
```

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "NewName",
  "timezone": "Europe/Moscow",
  "updated_at": "2025-08-09T14:20:00Z"
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.
  * –ò–∑–º–µ–Ω–µ–Ω–∏–µ email –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ API –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ.
  * –ü—Ä–∏ —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è –æ–Ω —Ö—ç—à–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.

---

### **DELETE /users/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

  * –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç.
  * –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –ª—é–±–æ–π –∞–∫–∫–∞—É–Ω—Ç.

* **–í—ã—Ö–æ–¥:**

```
204 No Content
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è).
  * –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ ‚Äî –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (—Å–¥–µ–ª–∫–∏, –ø–æ–∑–∏—Ü–∏–∏, –∑–∞–º–µ—Ç–∫–∏) —É–¥–∞–ª—è—é—Ç—Å—è –∏–ª–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ —É–¥–∞–ª—ë–Ω–Ω—ã–µ.

---

## **9.3. Trades (–°–¥–µ–ª–∫–∏)**

---

### **POST /trades**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å–¥–µ–ª–∫—É –≤—Ä—É—á–Ω—É—é. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

* **–í—Ö–æ–¥:**

```json
{
  "position_id": 101,            // –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
  "instrument": "SBER",
  "trade_date": "2025-08-08T12:00:00Z",
  "operation": "buy",            // "buy" –∏–ª–∏ "sell"
  "quantity": 10,
  "price": 200.00,
  "commission": 1.50,
  "note": "–ü–æ–∫—É–ø–∫–∞ –ø–æ –ø–ª–∞–Ω—É"
}
```

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 305,
  "position_id": 101,
  "instrument": "SBER",
  "trade_date": "2025-08-08T12:00:00Z",
  "operation": "buy",
  "quantity": 10,
  "price": 200.00,
  "commission": 1.50,
  "note": "–ü–æ–∫—É–ø–∫–∞ –ø–æ –ø–ª–∞–Ω—É"
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ï—Å–ª–∏ `position_id` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è.
  * –í–∞–ª–∏–¥–∞—Ü–∏—è: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ > 0, —Ü–µ–Ω–∞ > 0.

---

### **GET /trades**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

* **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (Query):**

  * `instrument` (string) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–∫–µ—Ä—É.
  * `from_date` (date) ‚Äî –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞.
  * `to_date` (date) ‚Äî –¥–∞—Ç–∞ –∫–æ–Ω—Ü–∞ –ø–µ—Ä–∏–æ–¥–∞.
  * `operation` (string) ‚Äî `"buy"` –∏–ª–∏ `"sell"`.

* **–í—ã—Ö–æ–¥:**

```json
[
  {
    "id": 301,
    "position_id": 101,
    "instrument": "GAZP",
    "trade_date": "2025-08-05T10:15:00Z",
    "operation": "buy",
    "quantity": 100,
    "price": 149.00,
    "commission": 3.50,
    "note": "–í—Ö–æ–¥ –ø–æ —Å–∏–≥–Ω–∞–ª—É EMA"
  }
]
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º.

---

### **GET /trades/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–¥–µ–ª–∫–µ.

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 301,
  "position_id": 101,
  "instrument": "GAZP",
  "trade_date": "2025-08-05T10:15:00Z",
  "operation": "buy",
  "quantity": 100,
  "price": 149.00,
  "commission": 3.50,
  "profit_loss_value": null,
  "profit_loss_percent": null,
  "note": "–í—Ö–æ–¥ –ø–æ —Å–∏–≥–Ω–∞–ª—É EMA"
}
```

---

### **PATCH /trades/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏.

* **–í—Ö–æ–¥:**

```json
{
  "quantity": 120,
  "price": 150.00,
  "note": "–î–æ–∫—É–ø–∫–∞ –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏"
}
```

* **–í—ã—Ö–æ–¥:** –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å–¥–µ–ª–∫–∏.

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å `operation` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.
  * –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã/–∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏.

---

### **DELETE /trades/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å —Å–¥–µ–ª–∫—É.

* **–í—ã—Ö–æ–¥:**

```
204 No Content
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ï—Å–ª–∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏ –≤ –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å–¥–µ–ª–æ–∫ ‚Äî –ø–æ–∑–∏—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## **9.4. Positions (–ü–æ–∑–∏—Ü–∏–∏)**

---

### **GET /positions**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫—Ä–∞—Ç–∫–æ–π —Å–≤–æ–¥–∫–æ–π.

* **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (Query):**

  * `instrument` (string) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–∫–µ—Ä—É.
  * `from_date` (date) ‚Äî –¥–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –æ—Ç.
  * `to_date` (date) ‚Äî –¥–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–æ.
  * `sort_by` (string) ‚Äî –ø–æ–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (`created_at`, `profit_loss_percent`).
  * `sort_dir` (string) ‚Äî `asc` –∏–ª–∏ `desc`.

* **–í—ã—Ö–æ–¥:**

```json
[
  {
    "id": 101,
    "instrument": "GAZP",
    "avg_price": 150.25,
    "quantity_total": 400,
    "total_profit_loss_value": 5000.00,
    "total_profit_loss_percent": 8.5,
    "note_preview": "–ü–æ–∫—É–ø–∫–∞ –Ω–∞ –ø–∞–¥–µ–Ω–∏–∏, —Ü–µ–ª—å 180...",
    "updated_at": "2025-08-07T15:45:00Z"
  }
]
```

---

### **GET /positions/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –ø–æ–∑–∏—Ü–∏–∏, –≤–∫–ª—é—á–∞—è —Å–¥–µ–ª–∫–∏, –∑–∞–º–µ—Ç–∫–∏ –∏ –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (–ª–µ—Å–µ–Ω–∫—É).

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 101,
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 400,
  "total_commission": 120.50,
  "total_profit_loss_value": 5000.00,
  "total_profit_loss_percent": 8.5,
  "note": {
    "id": 15,
    "text": "–ü–æ–∫—É–ø–∫–∞ –Ω–∞ –ø–∞–¥–µ–Ω–∏–∏, —Ü–µ–ª—å 180, —Å–ª–µ–¥—É—é—â–∞—è –¥–æ–∫—É–ø–∫–∞ –Ω–∞ 145",
    "category": null
  },
  "trades": [
    {
      "id": 301,
      "trade_date": "2025-08-05T10:15:00Z",
      "operation": "buy",
      "quantity": 100,
      "price": 149.00,
      "commission": 3.50,
      "profit_loss_value": null,
      "profit_loss_percent": null,
      "note": {
        "id": 22,
        "text": "–í—Ö–æ–¥ –ø–æ —Å–∏–≥–Ω–∞–ª—É EMA"
      }
    }
  ],
  "ladder_plan": [
    {
      "price": 145.00,
      "action": "buy",
      "percent_of_position": 20
    },
    {
      "price": 180.00,
      "action": "sell",
      "percent_of_position": 50
    }
  ]
}
```

---

### **POST /positions**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –≤—Ä—É—á–Ω—É—é (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é —Å–¥–µ–ª–∫—É –∏ –∑–∞–º–µ—Ç–∫—É).

* **–í—Ö–æ–¥:**

```json
{
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 100,
  "note": {
    "text": "–ü–µ—Ä–≤–∞—è –ø–æ–∫—É–ø–∫–∞ –≤ —Ä–∞–º–∫–∞—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –°–ê–ò",
    "category": "idea"
  }
}
```

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 101,
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 100
}
```

---

### **PATCH /positions/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏, –∑–∞–º–µ—Ç–∫—É –∏/–∏–ª–∏ –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π.

* **–í—Ö–æ–¥:**

```json
{
  "avg_price": 152.00,
  "note": {
    "text": "–û–±–Ω–æ–≤–∏–ª —Ü–µ–ª–µ–≤—É—é —Ü–µ–Ω—É –¥–æ 185",
    "category": "update"
  },
  "ladder_plan": [
    { "price": 145.00, "action": "buy", "percent_of_position": 20 },
    { "price": 185.00, "action": "sell", "percent_of_position": 50 }
  ]
}
```

* **–í—ã—Ö–æ–¥:** –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–∑–∏—Ü–∏–∏.

---

### **DELETE /positions/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∏ –∑–∞–º–µ—Ç–∫–∏.

* **–í—ã—Ö–æ–¥:**

```
204 No Content
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.
  * –ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

---

## **9.5. Notes (–ó–∞–º–µ—Ç–∫–∏)**

---

### **POST /notes**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—É—é –∫ –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ —Å–¥–µ–ª–∫–µ.

* **–í—Ö–æ–¥:**

```json
{
  "trade_id": 123,       // –ª–∏–±–æ position_id
  "position_id": null,   // –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å null
  "text": "–ö—É–ø–∏–ª –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–µ—Å–µ–Ω–∫–∞, –ø–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å",
  "category": "—Å—Ç—Ä–∞—Ç–µ–≥–∏—è"
}
```

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 55,
  "trade_id": 123,
  "position_id": null,
  "text": "–ö—É–ø–∏–ª –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–µ—Å–µ–Ω–∫–∞, –ø–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å",
  "category": "—Å—Ç—Ä–∞—Ç–µ–≥–∏—è",
  "created_at": "2025-08-08T10:20:00Z"
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ó–∞–º–µ—Ç–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
  * –ö–∞—Ç–µ–≥–æ—Ä–∏—è (`category`) –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞.
  * –ú–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (Web Speech API –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ).

---

### **GET /notes**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

* **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (Query):**

  * `trade_id` (optional) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–¥–µ–ª–∫–µ.
  * `position_id` (optional) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–æ–∑–∏—Ü–∏–∏.
  * `category` (optional) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

* **–í—ã—Ö–æ–¥:**

```json
[
  {
    "id": 55,
    "trade_id": 123,
    "position_id": null,
    "text": "–ö—É–ø–∏–ª –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–µ—Å–µ–Ω–∫–∞, –ø–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å",
    "category": "—Å—Ç—Ä–∞—Ç–µ–≥–∏—è",
    "created_at": "2025-08-08T10:20:00Z"
  },
  {
    "id": 56,
    "trade_id": null,
    "position_id": 12,
    "text": "–°–ª–µ–¥—É—é—â–∞—è —Ü–µ–ª—å ‚Äî 180 —Ä—É–±.",
    "category": "—Ü–µ–ª—å",
    "created_at": "2025-08-08T10:30:00Z"
  }
]
```

---

### **PATCH /notes/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –∏/–∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∑–∞–º–µ—Ç–∫–∏.

* **–í—Ö–æ–¥:**

```json
{
  "text": "–¶–µ–ª—å 180 —Ä—É–±., —Å—Ç–æ–ø 150 —Ä—É–±.",
  "category": "–ø–ª–∞–Ω"
}
```

* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 55,
  "text": "–¶–µ–ª—å 180 —Ä—É–±., —Å—Ç–æ–ø 150 —Ä—É–±.",
  "category": "–ø–ª–∞–Ω",
  "updated_at": "2025-08-08T12:00:00Z"
}
```

---

### **DELETE /notes/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∑–∞–º–µ—Ç–∫—É.

* **–í—ã—Ö–æ–¥:**

```
204 No Content
```

---

### **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É üé§ —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ –∑–∞–º–µ—Ç–∫–∏.
2. JS –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫).
3. –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞.
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç.
5. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π POST-–∑–∞–ø—Ä–æ—Å `/notes`.

---

## **9.6. Import (–ò–º–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –±—Ä–æ–∫–µ—Ä–∞)**

---

### **POST /import**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∏—Ç—å HTML-–æ—Ç—á—ë—Ç –±—Ä–æ–∫–µ—Ä–∞ (—Å—É—Ç–æ—á–Ω—ã–π –∏–ª–∏ –º–µ—Å—è—á–Ω—ã–π) –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ –∏ –∏–º–ø–æ—Ä—Ç–∞.
* **–î–æ—Å—Ç—É–ø:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
* **–í—Ö–æ–¥ (multipart/form-data):**

  * `file` ‚Äî HTML-—Ñ–∞–π–ª –æ—Ç—á—ë—Ç–∞ –±—Ä–æ–∫–µ—Ä–∞.
  * `report_type` *(optional)* ‚Äî `daily` –∏–ª–∏ `monthly` (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
* **–í—ã—Ö–æ–¥:**

```json
{
  "draft_id": 77,
  "broker_report_file_id": 54,
  "total_trades_found": 12,
  "potential_conflicts": 3
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `broker_report_files`.
  * –°–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–Ω–æ–≤–∏–∫ –∏–º–ø–æ—Ä—Ç–∞ (`import_drafts`).
  * –û–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–¥–µ–ª–∫–∞–º–∏.

---

### **GET /import/drafts**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–í—ã—Ö–æ–¥:**

```json
[
  {
    "id": 77,
    "report_type": "daily",
    "report_period_start": "2025-08-06",
    "report_period_end": "2025-08-06",
    "total_trades": 12,
    "potential_conflicts": 3,
    "created_at": "2025-08-06T12:00:00Z"
  }
]
```

---

### **GET /import/drafts/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞.
* **–í—ã—Ö–æ–¥:**

```json
{
  "id": 77,
  "broker_report_file_id": 54,
  "draft_trades": [
    {
      "draft_trade_id": "tmp-1",
      "instrument": "GAZP",
      "trade_date": "2025-08-06T10:15:00Z",
      "operation": "buy",
      "quantity": 100,
      "price": 149.00,
      "commission": 3.50,
      "match_status": "conflict",
      "existing_trade": {
        "id": 301,
        "price": 150.00,
        "commission": null
      }
    },
    {
      "draft_trade_id": "tmp-2",
      "instrument": "SBER",
      "trade_date": "2025-08-06T11:05:00Z",
      "operation": "sell",
      "quantity": 50,
      "price": 270.00,
      "commission": 2.70,
      "match_status": "new"
    }
  ]
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ö–∞–∂–¥–∞—è —Å–¥–µ–ª–∫–∞ –∏–∑ –æ—Ç—á—ë—Ç–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å: `new`, `match` –∏–ª–∏ `conflict`.
  * –î–ª—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≤–µ—Ä—Å–∏—è.

---

### **POST /import/drafts/{id}/resolve**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ —Å–¥–µ–ª–∫–∞–º.
* **–í—Ö–æ–¥:**

```json
{
  "resolutions": [
    {
      "draft_trade_id": "tmp-1",
      "decision": "keep_draft"  // –∏–ª–∏ "keep_existing", –∏–ª–∏ "merge"
    },
    {
      "draft_trade_id": "tmp-2",
      "decision": "keep_draft"
    }
  ]
}
```

* **–ü—Ä–∞–≤–∏–ª–∞ `decision`:**

  * `keep_draft` ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–¥–µ–ª–∫—É –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –æ—Ç—á—ë—Ç–∞.
  * `keep_existing` ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
  * `merge` ‚Äî –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.
* **–í—ã—Ö–æ–¥:**

```json
{
  "message": "Conflicts resolved. You can now confirm the import."
}
```

---

### **POST /import/drafts/{id}/confirm**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –∫ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–∑–µ (`trades` / `positions`).
* **–í—ã—Ö–æ–¥:**

```json
{
  "message": "Import completed successfully",
  "trades_imported": 12,
  "trades_updated": 3
}
```

---

### **DELETE /import/drafts/{id}**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç, —É–¥–∞–ª–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –æ—Ç—á—ë—Ç–∞.
* **–í—ã—Ö–æ–¥:**

```
204 No Content
```

---

## **9.7. Analytics (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞)**

---

### **GET /analytics/positions**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –ø–æ–∑–∏—Ü–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–î–æ—Å—Ç—É–ø:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
* **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

  * `from_date` *(optional)* ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞.
  * `to_date` *(optional)* ‚Äî –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞.
  * `group_by` *(optional)* ‚Äî —Å–ø–æ—Å–æ–± –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (`instrument`, `month`, `year`).
* **–í—ã—Ö–æ–¥:**

```json
{
  "total_positions": 12,
  "total_profit_loss_value": 15200.50,
  "total_profit_loss_percent": 8.7,
  "by_instrument": [
    {
      "instrument": "GAZP",
      "profit_loss_value": 5000.00,
      "profit_loss_percent": 8.5
    },
    {
      "instrument": "SBER",
      "profit_loss_value": 10200.50,
      "profit_loss_percent": 9.2
    }
  ]
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –∏–ª–∏ –ø–µ—Ä–∏–æ–¥—É.
  * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π.

---

### **GET /analytics/trades**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–¥–µ–ª–∫–∞–º –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
* **–î–æ—Å—Ç—É–ø:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
* **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

  * `from_date` *(optional)* ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞.
  * `to_date` *(optional)* ‚Äî –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞.
  * `instrument` *(optional)* ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–∫–µ—Ä—É.
* **–í—ã—Ö–æ–¥:**

```json
{
  "total_trades": 35,
  "average_profit_loss_value": 420.75,
  "average_profit_loss_percent": 2.5,
  "win_rate_percent": 62.8,
  "profit_factor": 1.85,
  "max_drawdown_percent": -7.2,
  "best_trade": {
    "id": 301,
    "instrument": "GAZP",
    "profit_loss_value": 1500.00,
    "profit_loss_percent": 10.0
  },
  "worst_trade": {
    "id": 322,
    "instrument": "SBER",
    "profit_loss_value": -800.00,
    "profit_loss_percent": -5.5
  }
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ü–æ–¥—Å—á—ë—Ç win rate, profit factor –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ—Å–∞–¥–∫–∏.
  * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª—É—á—à–µ–π –∏ —Ö—É–¥—à–µ–π —Å–¥–µ–ª–∫–∏ –≤ –ø–µ—Ä–∏–æ–¥–µ.

---

## **9.8. Settings (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)**

---

### **GET /settings**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–î–æ—Å—Ç—É–ø:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
* **–í—ã—Ö–æ–¥:**

```json
{
  "timezone": "Europe/Moscow",
  "currency": "RUB",
  "language": "ru",
  "date_format": "DD.MM.YYYY",
  "notifications": {
    "email": true,
    "push": false
  },
  "default_trade_commission": 0.05
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø—Ä–∏–≤—è–∑–∫–µ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
  * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–∞—Ö –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

---

### **PATCH /settings**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–î–æ—Å—Ç—É–ø:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
* **–í—Ö–æ–¥:**

```json
{
  "timezone": "Europe/Moscow",
  "currency": "USD",
  "language": "en",
  "notifications": {
    "email": false,
    "push": true
  },
  "default_trade_commission": 0.03
}
```

* **–í—ã—Ö–æ–¥:**

```json
{
  "timezone": "Europe/Moscow",
  "currency": "USD",
  "language": "en",
  "date_format": "DD.MM.YYYY",
  "notifications": {
    "email": false,
    "push": true
  },
  "default_trade_commission": 0.03
}
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—è –∏–∑–º–µ–Ω—è—é—Ç—Å—è).
  * –ü–æ–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

    * `timezone` ‚Äî –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å IANA.
    * `currency` ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç (`RUB`, `USD`, `EUR` –∏ –¥—Ä.).
    * `language` ‚Äî –æ–¥–∏–Ω –∏–∑ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤ (`ru`, `en` –∏ –¥—Ä.).
    * `default_trade_commission` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–∏—Å—Å–∏–∏ (0‚Äì100).

---

## **9.9. Logs (–ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π)**

---

### **GET /logs**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è –∞–¥–º–∏–Ω–∞).
* **–î–æ—Å—Ç—É–ø:**

  * –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è.
  * –ê–¥–º–∏–Ω ‚Äî –≤–∏–¥–∏—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ.
* **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

  * `user_id` *(int, optional)* ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞).
  * `from_date` *(string, optional, —Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD)* ‚Äî –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞.
  * `to_date` *(string, optional, —Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD)* ‚Äî –¥–∞—Ç–∞ –∫–æ–Ω—Ü–∞ –ø–µ—Ä–∏–æ–¥–∞.
  * `action_type` *(string, optional)* ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –¥–µ–π—Å—Ç–≤–∏—è (`login`, `create_trade`, `delete_note`, –∏ —Ç.–¥.).
  * `limit` *(int, optional)* ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
  * `page` *(int, optional)* ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
* **–í—ã—Ö–æ–¥:**

```json
[
  {
    "id": 501,
    "user_id": 1,
    "username": "TraderJoe",
    "action_type": "create_trade",
    "action_description": "–°–æ–∑–¥–∞–Ω–∞ —Å–¥–µ–ª–∫–∞ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É SBER",
    "created_at": "2025-08-08T10:30:00Z",
    "ip_address": "192.168.1.10",
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
  },
  {
    "id": 502,
    "user_id": 1,
    "username": "TraderJoe",
    "action_type": "update_position",
    "action_description": "–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è GAZP: –∏–∑–º–µ–Ω–µ–Ω–∞ —Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞",
    "created_at": "2025-08-08T12:15:00Z",
    "ip_address": "192.168.1.10",
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
  }
]
```

* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

  * –õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏: IP, user-agent, –≤—Ä–µ–º—è.
  * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
  * –í–æ–∑–º–æ–∂–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ –≤ CSV/JSON (–¥–ª—è –∞–¥–º–∏–Ω–∞).

---

### **DELETE /logs**

* **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤.
* **–î–æ—Å—Ç—É–ø:**

  * –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –º–æ–∂–µ—Ç –æ—á–∏—â–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ª–æ–≥–∏.
  * –ê–¥–º–∏–Ω ‚Äî –º–æ–∂–µ—Ç –æ—á–∏—â–∞—Ç—å –ª–æ–≥–∏ –ª—é–±—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –≤—Å–µ —Å—Ä–∞–∑—É.
* **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

  * `user_id` *(optional)* ‚Äî —á—å–∏ –ª–æ–≥–∏ —É–¥–∞–ª—è—Ç—å (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω).
  * `before_date` *(optional)* ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã.
* **–í—ã—Ö–æ–¥:**

```json
{
  "message": "–õ–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã",
  "deleted_count": 125
}
```

---

