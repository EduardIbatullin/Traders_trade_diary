
# üìÑ API-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∫ –ø—Ä–æ–µ–∫—Ç—É "–û–Ω–ª–∞–π–Ω-–¥–Ω–µ–≤–Ω–∏–∫ —Å–¥–µ–ª–æ–∫"

*(—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ä–∞–∑–¥–µ–ª–∞ 9 –¢–ó)*

## 9.1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

### **POST /auth/register** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω).

**–î–æ—Å—Ç—É–ø:**
–û—Ç–∫—Ä—ã—Ç—ã–π (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏).

**–í—Ö–æ–¥ (JSON body):**

| –ü–æ–ª–µ     | –¢–∏–ø            | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                  |
| -------- | -------------- | ----- | ------------------------- |
| email    | string (email) | ‚úÖ     | –ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã   |
| username | string         | ‚úÖ     | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è          |
| password | string (min 8) | ‚úÖ     | –ü–∞—Ä–æ–ª—å                    |
| timezone | string (IANA)  | ‚ùå     | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

* Email —É–Ω–∏–∫–∞–ª–µ–Ω.
* –ü–∞—Ä–æ–ª—å ‚â• 8 —Å–∏–º–≤–æ–ª–æ–≤.
* Username ‚â• 3 —Å–∏–º–≤–æ–ª–∞.

**–û—Ç–≤–µ—Ç (201 Created):**

```json
{
  "user": {
    "id": 1,
    "email": "user@example.com",
    "username": "TraderJoe",
    "timezone": "Europe/Moscow"
  },
  "token": "eyJhbGciOiJIUzI1..."
}
```

**–û—à–∏–±–∫–∏:**

* `400 Bad Request` ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
* `409 Conflict` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

### **POST /auth/login** ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –≤—ã–¥–∞—á–µ–π JWT-—Ç–æ–∫–µ–Ω–∞.

**–î–æ—Å—Ç—É–ø:**
–û—Ç–∫—Ä—ã—Ç—ã–π.

**–í—Ö–æ–¥ (JSON body):**

| –ü–æ–ª–µ     | –¢–∏–ø    | –û–±—è–∑. |
| -------- | ------ | ----- |
| email    | string | ‚úÖ     |
| password | string | ‚úÖ     |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "token": "eyJhbGciOiJIUzI1...",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "username": "TraderJoe",
    "timezone": "Europe/Moscow"
  }
}
```

**–û—à–∏–±–∫–∏:**

* `401 Unauthorized` ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å

---

### **POST /auth/refresh** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–û–±–Ω–æ–≤–ª—è–µ—Ç JWT-—Ç–æ–∫–µ–Ω, –µ—Å–ª–∏ –æ–Ω —Å–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞–µ—Ç.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–í—Ö–æ–¥:**

* HTTP Header: `Authorization: Bearer <refresh_token>`

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "token": "eyJhbGciOiJIUzI1..."
}
```

---

### **POST /auth/logout** ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ê–Ω–Ω—É–ª–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π refresh-—Ç–æ–∫–µ–Ω.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **GET /users/me** ‚Äî –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "TraderJoe",
  "role": "user",
  "timezone": "Europe/Moscow",
  "created_at": "2025-08-08T10:00:00Z"
}
```

---

### **PATCH /users/me** ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–í—Ö–æ–¥ (JSON body):**

| –ü–æ–ª–µ     | –¢–∏–ø    | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ         |
| -------- | ------ | ----- | ---------------- |
| username | string | ‚ùå     | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| timezone | string | ‚ùå     | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å     |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "NewName",
  "timezone": "Europe/Moscow"
}
```

---

### **PATCH /users/me/password** ‚Äî —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–í—Ö–æ–¥ (JSON body):**

| –ü–æ–ª–µ          | –¢–∏–ø    | –û–±—è–∑. |
| ------------- | ------ | ----- |
| old\_password | string | ‚úÖ     |
| new\_password | string | ‚úÖ     |

**–û—Ç–≤–µ—Ç:**
`204 No Content`

**–û—à–∏–±–∫–∏:**

* `400 Bad Request` ‚Äî –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π
* `403 Forbidden` ‚Äî —Å—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–µ–Ω

---

### **–ê–¥–º–∏–Ω—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

#### **GET /users** ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

**–î–æ—Å—Ç—É–ø:**
Admin.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

* `page` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
* `limit` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 1,
    "email": "user@example.com",
    "username": "TraderJoe",
    "role": "user",
    "created_at": "2025-08-08T10:00:00Z"
  }
]
```

---

## 9.2. –°–¥–µ–ª–∫–∏ (Trades) –∏ –ü–æ–∑–∏—Ü–∏–∏ (Positions)

---

### **GET /positions** ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫—Ä–∞—Ç–∫–æ–π —Å–≤–æ–¥–∫–æ–π (–¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞).

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø  | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
| ---------- | ---- | ----------------------------------------------------- |
| instrument | str  | –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–∫–µ—Ä—É                                      |
| from\_date | date | –§–∏–ª—å—Ç—Ä —Å –¥–∞—Ç—ã                                         |
| to\_date   | date | –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç—É                                        |
| sort\_by   | str  | –ü–æ–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (`created_at`, `profit_loss_percent`) |
| sort\_dir  | str  | `asc` –∏–ª–∏ `desc`                                      |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 101,
    "instrument": "GAZP",
    "avg_price": 150.25,
    "quantity_total": 400,
    "total_profit_loss_value": 5000.00,
    "total_profit_loss_percent": 8.5,
    "note_preview": "–ü–æ–∫—É–ø–∫–∞ –Ω–∞ –ø–∞–¥–µ–Ω–∏–∏, —Ü–µ–ª—å 180...",
    "updated_at": "2025-08-07T15:45:00Z"
  }
]
```

---

### **GET /positions/{id}** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –ø–æ–∑–∏—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏, –≤–∫–ª—é—á–∞—è —Å–¥–µ–ª–∫–∏ –∏ –∑–∞–º–µ—Ç–∫–∏.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "id": 101,
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 400,
  "total_commission": 120.50,
  "total_profit_loss_value": 5000.00,
  "total_profit_loss_percent": 8.5,
  "note": {
    "id": 15,
    "text": "–ü–æ–∫—É–ø–∫–∞ –Ω–∞ –ø–∞–¥–µ–Ω–∏–∏, —Ü–µ–ª—å 180, —Å–ª–µ–¥—É—é—â–∞—è –¥–æ–∫—É–ø–∫–∞ –Ω–∞ 145",
    "category": null
  },
  "trades": [
    {
      "id": 301,
      "trade_date": "2025-08-05T10:15:00Z",
      "operation": "buy",
      "quantity": 100,
      "price": 149.00,
      "commission": 3.50,
      "profit_loss_value": null,
      "profit_loss_percent": null,
      "note": {
        "id": 22,
        "text": "–í—Ö–æ–¥ –ø–æ —Å–∏–≥–Ω–∞–ª—É EMA"
      }
    }
  ],
  "ladder_plan": [
    {
      "price": 145.00,
      "action": "buy",
      "percent_of_position": 20
    },
    {
      "price": 180.00,
      "action": "sell",
      "percent_of_position": 50
    }
  ]
}
```

---

### **POST /positions** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é —Å–¥–µ–ª–∫—É –∏ –∑–∞–º–µ—Ç–∫—É.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 100,
  "note": {
    "text": "–ü–µ—Ä–≤–∞—è –ø–æ–∫—É–ø–∫–∞ –≤ —Ä–∞–º–∫–∞—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –°–ê–ò",
    "category": "idea"
  }
}
```

**–û—Ç–≤–µ—Ç (201 Created):**

```json
{
  "id": 101,
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 100
}
```

---

### **PATCH /positions/{id}** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ–ª—è –ø–æ–∑–∏—Ü–∏–∏, –∑–∞–º–µ—Ç–∫—É, —É—Ä–æ–≤–Ω–∏ –ª–µ—Å–µ–Ω–∫–∏.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "avg_price": 152.00,
  "note": {
    "text": "–û–±–Ω–æ–≤–∏–ª —Ü–µ–ª–µ–≤—É—é —Ü–µ–Ω—É –¥–æ 185",
    "category": "update"
  },
  "ladder_plan": [
    { "price": 145.00, "action": "buy", "percent_of_position": 20 },
    { "price": 185.00, "action": "sell", "percent_of_position": 50 }
  ]
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–∑–∏—Ü–∏–∏.

---

### **DELETE /positions/{id}** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–£–¥–∞–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ –≤—Å–µ –µ—ë —Å–¥–µ–ª–∫–∏/–∑–∞–º–µ—Ç–∫–∏.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **GET /trades** ‚Äî —Å–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å–¥–µ–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø  | –û–ø–∏—Å–∞–Ω–∏–µ          |
| ------------ | ---- | ----------------- |
| position\_id | int  | –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–∑–∏—Ü–∏–∏ |
| instrument   | str  | –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–∫–µ—Ä—É  |
| from\_date   | date | –° –∫–∞–∫–æ–π –¥–∞—Ç—ã      |
| to\_date     | date | –ü–æ –∫–∞–∫—É—é –¥–∞—Ç—É     |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 301,
    "instrument": "GAZP",
    "trade_date": "2025-08-05T10:15:00Z",
    "operation": "buy",
    "quantity": 100,
    "price": 149.00,
    "commission": 3.50,
    "profit_loss_value": null,
    "profit_loss_percent": null,
    "note_preview": "–í—Ö–æ–¥ –ø–æ —Å–∏–≥–Ω–∞–ª—É EMA"
  }
]
```

---

### **POST /trades** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ –≤—Ä—É—á–Ω—É—é

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–î–æ–±–∞–≤–ª—è–µ—Ç —Å–¥–µ–ª–∫—É –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ø–æ–∑–∏—Ü–∏—é –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "position_id": 101,
  "instrument": "GAZP",
  "trade_date": "2025-08-08T09:45:00Z",
  "operation": "buy",
  "quantity": 50,
  "price": 148.50,
  "commission": 2.50,
  "note": {
    "text": "–î–æ–∫—É–ø–∫–∞ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–µ"
  }
}
```

**–û—Ç–≤–µ—Ç (201 Created):**

```json
{
  "id": 305,
  "instrument": "GAZP",
  "operation": "buy",
  "quantity": 50,
  "price": 148.50
}
```

---

### **PATCH /trades/{id}** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏, –≤–∫–ª—é—á–∞—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.

**–û—Ç–≤–µ—Ç:**
–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–¥–µ–ª–∫–∏.

---

### **DELETE /trades/{id}** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

## 9.3. –ò–º–ø–æ—Ä—Ç –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫

---

### **POST /import** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ HTML-–æ—Ç—á—ë—Ç–∞ –±—Ä–æ–∫–µ—Ä–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç HTML-—Ñ–∞–π–ª –æ—Ç—á—ë—Ç–∞ –°–±–µ—Ä–±–∞–Ω–∫–∞ (—Å—É—Ç–æ—á–Ω—ã–π –∏–ª–∏ –º–µ—Å—è—á–Ω—ã–π) –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞.
–§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `broker_report_files`, –ø–∞—Ä—Å–∏—Ç—Å—è –∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `import_drafts`.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–í—Ö–æ–¥ (multipart/form-data):**

* `file`: HTML-—Ñ–∞–π–ª –æ—Ç—á—ë—Ç–∞ –±—Ä–æ–∫–µ—Ä–∞.
* `report_type` (optional): `daily` –∏–ª–∏ `monthly` (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

**–û—Ç–≤–µ—Ç (201 Created):**

```json
{
  "draft_id": 77,
  "broker_report_file_id": 54,
  "total_trades_found": 12,
  "potential_conflicts": 3
}
```

---

### **GET /import/drafts** ‚Äî —Å–ø–∏—Å–æ–∫ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏–º–ø–æ—Ä—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 77,
    "report_type": "daily",
    "report_period_start": "2025-08-06",
    "report_period_end": "2025-08-06",
    "total_trades": 12,
    "potential_conflicts": 3,
    "created_at": "2025-08-06T12:00:00Z"
  }
]
```

---

### **GET /import/drafts/{id}** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å–¥–µ–ª–∫–∏ –∏–∑ –æ—Ç—á—ë—Ç–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö —Å–æ–≤–ø–∞–¥–∞—é—Ç –∏–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å —É–∂–µ –∏–º–µ—é—â–∏–º–∏—Å—è.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "id": 77,
  "broker_report_file_id": 54,
  "draft_trades": [
    {
      "draft_trade_id": "tmp-1",
      "instrument": "GAZP",
      "trade_date": "2025-08-06T10:15:00Z",
      "operation": "buy",
      "quantity": 100,
      "price": 149.00,
      "commission": 3.50,
      "match_status": "conflict",
      "existing_trade": {
        "id": 301,
        "price": 150.00,
        "commission": null
      }
    },
    {
      "draft_trade_id": "tmp-2",
      "instrument": "SBER",
      "trade_date": "2025-08-06T11:05:00Z",
      "operation": "sell",
      "quantity": 50,
      "price": 270.00,
      "commission": 2.70,
      "match_status": "new"
    }
  ]
}
```

---

### **POST /import/drafts/{id}/resolve** ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é –≤—ã–±–∏—Ä–∞–µ—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω–æ–π —Å–¥–µ–ª–∫–∏.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "resolutions": [
    {
      "draft_trade_id": "tmp-1",
      "decision": "keep_draft"  // –∏–ª–∏ "keep_existing", –∏–ª–∏ "merge"
    },
    {
      "draft_trade_id": "tmp-2",
      "decision": "keep_draft"
    }
  ]
}
```

**–ü—Ä–∞–≤–∏–ª–∞ `decision`:**

* `keep_draft` ‚Äî –∑–∞–º–µ–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–¥–µ–ª–∫—É –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –æ—Ç—á—ë—Ç–∞.
* `keep_existing` ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–¥–µ–ª–∫—É –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
* `merge` ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–∏—Å—Å–∏—é –∏–∑ –æ—Ç—á—ë—Ç–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–¥–µ–ª–∫—É).

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "message": "Conflicts resolved. You can now confirm the import."
}
```

---

### **POST /import/drafts/{id}/confirm** ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —á–µ—Ä–Ω–æ–≤–∏–∫ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–∑–µ (`trades` / `positions`).

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "message": "Import completed successfully",
  "trades_imported": 12,
  "trades_updated": 3
}
```

---

### **DELETE /import/drafts/{id}** ‚Äî –æ—Ç–º–µ–Ω–∞ –∏–º–ø–æ—Ä—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–£–¥–∞–ª—è–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –æ—Ç—á—ë—Ç–∞, –Ω–µ –≤–Ω–æ—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ—Å–Ω–æ–≤–Ω—É—é –±–∞–∑—É.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –∑–∞–ª–æ–∂–∏–ª–∏:

* –õ–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç—á—ë—Ç–∞.
* –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º —Å–¥–µ–ª–æ–∫.
* –ú–µ—Ö–∞–Ω–∏–∑–º –≤—ã—è–≤–ª–µ–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
* –§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞.

---

## 9.4. –ó–∞–º–µ—Ç–∫–∏ –∏ –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥

---

### **–û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**

* –ó–∞–º–µ—Ç–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ **—Å–¥–µ–ª–∫–µ** (`trade_id`) –∏–ª–∏ **–ø–æ–∑–∏—Ü–∏–∏** (`position_id`).
* –û–¥–Ω–∞ –∑–∞–º–µ—Ç–∫–∞ ‚Äî –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
* –ö–∞—Ç–µ–≥–æ—Ä–∏—è (`category`) –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞, —Ç–µ–≥–∏ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤ –±—É–¥—É—â–µ–º.
* –¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å **–≤—Ä—É—á–Ω—É—é** –∏–ª–∏ **—á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥** (Web Speech API).
* –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ **frontend**, —Ç–µ–∫—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ backend –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞.

---

### **POST /notes** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É –∫ –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ —Å–¥–µ–ª–∫–µ.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "trade_id": 123,       // –ª–∏–±–æ position_id
  "position_id": null,   // –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å null
  "text": "–ö—É–ø–∏–ª –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–µ—Å–µ–Ω–∫–∞, –ø–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å",
  "category": "—Å—Ç—Ä–∞—Ç–µ–≥–∏—è"
}
```

**–û—Ç–≤–µ—Ç (201 Created):**

```json
{
  "id": 55,
  "trade_id": 123,
  "position_id": null,
  "text": "–ö—É–ø–∏–ª –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–µ—Å–µ–Ω–∫–∞, –ø–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å",
  "category": "—Å—Ç—Ä–∞—Ç–µ–≥–∏—è",
  "created_at": "2025-08-08T10:20:00Z"
}
```

---

### **GET /notes** ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–æ –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ —Å–¥–µ–ª–∫–µ).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `trade_id` (optional)
* `position_id` (optional)
* `category` (optional)

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 55,
    "trade_id": 123,
    "position_id": null,
    "text": "–ö—É–ø–∏–ª –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–µ—Å–µ–Ω–∫–∞, –ø–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å",
    "category": "—Å—Ç—Ä–∞—Ç–µ–≥–∏—è",
    "created_at": "2025-08-08T10:20:00Z"
  },
  {
    "id": 56,
    "trade_id": null,
    "position_id": 12,
    "text": "–°–ª–µ–¥—É—é—â–∞—è —Ü–µ–ª—å ‚Äî 180 —Ä—É–±.",
    "category": "—Ü–µ–ª—å",
    "created_at": "2025-08-08T10:30:00Z"
  }
]
```

---

### **PUT /notes/{id}** ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –∏/–∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∑–∞–º–µ—Ç–∫–∏.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "text": "–¶–µ–ª—å 180 —Ä—É–±., —Å—Ç–æ–ø 150 —Ä—É–±.",
  "category": "–ø–ª–∞–Ω"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "id": 55,
  "text": "–¶–µ–ª—å 180 —Ä—É–±., —Å—Ç–æ–ø 150 —Ä—É–±.",
  "category": "–ø–ª–∞–Ω",
  "updated_at": "2025-08-08T12:00:00Z"
}
```

---

### **DELETE /notes/{id}** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–£–¥–∞–ª—è–µ—Ç –∑–∞–º–µ—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (frontend)**

–¢–∞–∫ –∫–∞–∫ **Web Speech API** —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É üé§ —Ä—è–¥–æ–º —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–ª–µ–º –∑–∞–º–µ—Ç–∫–∏.
2. JS –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫).
3. –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞.
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç.
5. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è ‚Äú–°–æ—Ö—Ä–∞–Ω–∏—Ç—å‚Äù –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π POST-–∑–∞–ø—Ä–æ—Å `/notes`.

---

### **UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞**

* –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ (–º–∏–≥–∞—é—â–∏–π –∑–Ω–∞—á–æ–∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞).
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å.
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (—Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é).
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –ø–∞—É–∑–µ > 3 —Å–µ–∫—É–Ω–¥.
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤ (–Ω–∞—á–∏–Ω–∞—è —Å —Ä—É—Å—Å–∫–æ–≥–æ).

---

## 9.5. –ü–æ–∑–∏—Ü–∏–∏ –∏ —Ä–∞—Å—á—ë—Ç—ã

---

### **GET /positions/{id}/stats** ‚Äî —Ä–∞—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –ø–æ–∑–∏—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –ø–æ–∑–∏—Ü–∏–∏ —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–∏—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞—Å—á—ë—Ç–∞ (FIFO).

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä        | –¢–∏–ø  | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                            |
| --------------- | ---- | ----- | ----------------------------------- |
| include\_ladder | bool | ‚ùå     | –î–æ–±–∞–≤–ª—è—Ç—å –ª–∏ –≤ –æ—Ç–≤–µ—Ç –ø–ª–∞–Ω ¬´–õ–µ—Å–µ–Ω–∫–∞¬ª |
| include\_trades | bool | ‚ùå     | –í–∫–ª—é—á–∞—Ç—å –ª–∏ —Å–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫ –≤ –ø–æ–∑–∏—Ü–∏–∏ |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "id": 101,
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 400,
  "total_commission": 120.50,
  "total_profit_loss_value": 5000.00,
  "total_profit_loss_percent": 8.5,
  "target_price": 180.00,
  "target_profit_percent": 19.8,
  "current_price": 163.00,
  "current_profit_percent": 8.5,
  "fifo_profit_loss": {
    "value": 4500.00,
    "percent": 7.8
  },
  "ladder_plan": [
    {
      "price": 145.00,
      "action": "buy",
      "percent_of_position": 20
    },
    {
      "price": 180.00,
      "action": "sell",
      "percent_of_position": 50
    }
  ],
  "updated_at": "2025-08-08T14:35:00Z"
}
```

**–û—à–∏–±–∫–∏:**

* `404 Not Found` ‚Äî –ø–æ–∑–∏—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
* `403 Forbidden` ‚Äî –¥–æ—Å—Ç—É–ø –∫ —á—É–∂–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–ø—Ä–µ—â—ë–Ω

---

### **POST /positions/{id}/target** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω—ã

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å —Ü–µ–ª–µ–≤—É—é —Ü–µ–Ω—É –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏, –ø–æ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å.

**–í—Ö–æ–¥ (JSON body):**

| –ü–æ–ª–µ          | –¢–∏–ø    | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                 |
| ------------- | ------ | ----- | ------------------------ |
| target\_price | number | ‚úÖ     | –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "position_id": 101,
  "target_price": 185.00,
  "target_profit_percent": 22.1
}
```

---

### **GET /positions/calculations** ‚Äî –º–∞—Å—Å–æ–≤—ã–π —Ä–∞—Å—á—ë—Ç –ø–æ –≤—Å–µ–º –ø–æ–∑–∏—Ü–∏—è–º

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –ø–æ–∑–∏—Ü–∏–π —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏ (—Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞, —Ç–µ–∫—É—â–∏–π P/L, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –¥–æ —Ü–µ–ª–∏ –∏ —Ç.–¥.).

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 101,
    "instrument": "GAZP",
    "avg_price": 150.25,
    "quantity_total": 400,
    "current_price": 163.00,
    "current_profit_percent": 8.5,
    "target_price": 180.00,
    "target_profit_percent": 19.8
  },
  {
    "id": 102,
    "instrument": "SBER",
    "avg_price": 270.00,
    "quantity_total": 200,
    "current_price": 275.50,
    "current_profit_percent": 2.0,
    "target_price": null,
    "target_profit_percent": null
  }
]
```

---

### **POST /positions/{id}/ladder** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∞ ¬´–õ–µ—Å–µ–Ω–∫–∞¬ª

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å —É—Ä–æ–≤–Ω–∏ —Ü–µ–Ω –¥–ª—è –ø–æ—ç—Ç–∞–ø–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫/–ø—Ä–æ–¥–∞–∂.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "ladder_plan": [
    { "price": 145.00, "action": "buy", "percent_of_position": 20 },
    { "price": 180.00, "action": "sell", "percent_of_position": 50 }
  ]
}
```

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "message": "Ladder plan updated successfully",
  "ladder_plan": [
    { "price": 145.00, "action": "buy", "percent_of_position": 20 },
    { "price": 180.00, "action": "sell", "percent_of_position": 50 }
  ]
}
```

---

### **DELETE /positions/{id}/ladder** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ ¬´–õ–µ—Å–µ–Ω–∫–∞¬ª

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ —Ü–µ–Ω –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### –†–∞—Å—á—ë—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ (backend)

1. **–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏**

   ```
   avg_price = (—Å—É–º–º–∞(—Ü–µ–Ω–∞ * –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) + –∫–æ–º–∏—Å—Å–∏–∏) / –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
   ```

2. **–¢–µ–∫—É—â–∏–π P/L**

   ```
   profit_loss_value = (current_price - avg_price) * quantity_total
   profit_loss_percent = (current_price - avg_price) / avg_price * 100
   ```

3. **–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –¥–æ —Ü–µ–ª–∏**

   ```
   target_profit_percent = (target_price - current_price) / current_price * 100
   ```

4. **FIFO —Ä–∞—Å—á—ë—Ç –ø—Ä–∏–±—ã–ª–∏ –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ**

   * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ —Å–¥–µ–ª–∫–∏ –ø–æ–∫—É–ø–∫–∏ –ø–µ—Ä–≤—ã–º–∏.
   * –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É.

---

### UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* –ù–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π —Å –∫—Ä–∞—Ç–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.
* –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏:

  * –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫: –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞, —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞, P/L, —Ü–µ–ª—å).
  * –ù–∏–∂–µ: —Å–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É).
  * –û—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫ ¬´–õ–µ—Å–µ–Ω–∫–∞¬ª —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —É—Ä–æ–≤–Ω–µ–π.
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é —Ü–µ–Ω—É.
* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ –ø–æ–¥ —Å–º–∞—Ä—Ç—Ñ–æ–Ω –∏ –ü–ö.

---

## 9.6. –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

### **GET /history** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ —Å–¥–µ–ª–∫–∞–º–∏, –ø–æ–∑–∏—Ü–∏—è–º–∏, –∏–º–ø–æ—Ä—Ç–∞–º–∏ –∏ –∑–∞–º–µ—Ç–∫–∞–º–∏, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø    | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                                             |
| ---------- | ------ | ----- | ---------------------------------------------------- |
| from\_date | date   | ‚ùå     | –° –¥–∞—Ç—ã (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ)                                |
| to\_date   | date   | ‚ùå     | –ü–æ –¥–∞—Ç—É (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ)                               |
| type       | string | ‚ùå     | –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (`trade`, `position`, `note`, `import`) |
| instrument | string | ‚ùå     | –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–∫–µ—Ä—É                                     |
| limit      | int    | ‚ùå     | –ö–æ–ª-–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)         |
| page       | int    | ‚ùå     | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)                      |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 5001,
    "timestamp": "2025-08-07T14:15:00Z",
    "type": "trade",
    "instrument": "GAZP",
    "operation": "buy",
    "quantity": 100,
    "price": 149.00,
    "note": "–í—Ö–æ–¥ –ø–æ EMA"
  },
  {
    "id": 5002,
    "timestamp": "2025-08-07T15:45:00Z",
    "type": "note",
    "instrument": "SBER",
    "note": "–ü—Ä–æ–±–æ–π —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è"
  }
]
```

---

### **GET /analytics/summary** ‚Äî –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –≤—Å–µ–º –ø–æ–∑–∏—Ü–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "total_positions": 12,
  "total_invested": 150000.00,
  "current_value": 165500.00,
  "total_profit_loss_value": 15500.00,
  "total_profit_loss_percent": 10.33,
  "best_position": {
    "instrument": "GAZP",
    "profit_percent": 18.4
  },
  "worst_position": {
    "instrument": "SBER",
    "profit_percent": -4.2
  }
}
```

---

### **GET /analytics/instrument/{ticker}** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–¥–µ–ª–æ–∫, –¥–∏–Ω–∞–º–∏–∫—É P/L –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ ¬´–õ–µ—Å–µ–Ω–∫–∞¬ª –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–∫–µ—Ä–∞.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "instrument": "GAZP",
  "avg_price": 150.25,
  "quantity_total": 400,
  "current_price": 163.00,
  "total_profit_loss_percent": 8.5,
  "trades_count": 12,
  "ladder_progress": [
    { "price": 145.00, "action": "buy", "done": true },
    { "price": 180.00, "action": "sell", "done": false }
  ],
  "pl_history": [
    { "date": "2025-08-01", "profit_percent": 5.0 },
    { "date": "2025-08-07", "profit_percent": 8.5 }
  ]
}
```

---

### **GET /analytics/daily** ‚Äî –¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è –∑–∞ —Ç–µ–∫—É—â–∏–π –∏–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–µ–Ω—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø  | –û–ø–∏—Å–∞–Ω–∏–µ                      |
| -------- | ---- | ----------------------------- |
| date     | date | –î–∞—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–µ–∫—É—â–∞—è) |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "date": "2025-08-07",
  "portfolio_change_value": 3500.00,
  "portfolio_change_percent": 2.1,
  "top_gainers": [
    { "instrument": "GAZP", "change_percent": 3.4 },
    { "instrument": "LKOH", "change_percent": 2.9 }
  ],
  "top_losers": [
    { "instrument": "SBER", "change_percent": -1.5 }
  ]
}
```

---

### **UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**

* **–ò—Å—Ç–æ—Ä–∏—è**:

  * –õ–µ–Ω—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Ç–∏–ø—É, —Ç–∏–∫–µ—Ä—É, –¥–∞—Ç–µ.
  * –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–∫–∏ —Ç–∏–ø–∞ (`buy`, `sell`, `note`).
* **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è**:

  * –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º.
  * –ö–∞—Ä—Ç–æ—á–∫–∞ –ª—É—á—à–µ–π –∏ —Ö—É–¥—à–µ–π –ø–æ–∑–∏—Ü–∏–∏.
* **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É**:

  * –ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è P/L.
  * –û—Ç–º–µ—Ç–∫–∏ –ø–æ –ø–ª–∞–Ω—É ¬´–õ–µ—Å–µ–Ω–∫–∞¬ª.
* **–î–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞**:

  * –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞ –¥–µ–Ω—å.
  * –ò–Ω–¥–∏–∫–∞—Ü–∏—è –ª—É—á—à–∏—Ö –∏ —Ö—É–¥—à–∏—Ö –±—É–º–∞–≥.

---

## 9.7. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

### **GET /settings** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≤–∫–ª—é—á–∞—è —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å, –≤–∞–ª—é—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "timezone": "Europe/Moscow",
  "default_currency": "RUB",
  "notifications": {
    "price_alerts": true,
    "import_reminders": false
  },
  "integrations": {
    "google_auth": false,
    "yandex_auth": false
  }
}
```

---

### **PATCH /settings** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–¥ —Å–µ–±—è.

**–í—Ö–æ–¥ (JSON body):**

| –ü–æ–ª–µ              | –¢–∏–ø    | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
| ----------------- | ------ | ----- | ----------------------------------------- |
| timezone          | string | ‚ùå     | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (IANA)                       |
| default\_currency | string | ‚ùå     | –í–∞–ª—é—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`RUB`, `USD`, `EUR`) |
| notifications     | object | ‚ùå     | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π                     |
| integrations      | object | ‚ùå     | –°—Ç–∞—Ç—É—Å—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π            |

**–ü—Ä–∏–º–µ—Ä:**

```json
{
  "timezone": "Europe/Moscow",
  "default_currency": "USD",
  "notifications": {
    "price_alerts": true,
    "import_reminders": true
  }
}
```

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "timezone": "Europe/Moscow",
  "default_currency": "USD",
  "notifications": {
    "price_alerts": true,
    "import_reminders": true
  },
  "integrations": {
    "google_auth": false,
    "yandex_auth": false
  }
}
```

---

### **POST /integrations/google/connect** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Google

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é Google –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ –∞–∫–∫–∞—É–Ω—Ç Google.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–û—Ç–≤–µ—Ç (302 Redirect):**
–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Google.

---

### **POST /integrations/google/disconnect** ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Google-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–û—Ç–≤—è–∑—ã–≤–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç Google –æ—Ç –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **POST /integrations/yandex/connect** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ø–Ω–¥–µ–∫—Å –¥–ª—è –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å ID.

**–û—Ç–≤–µ—Ç (302 Redirect):**
–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å.

---

### **POST /integrations/yandex/disconnect** ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **GET /integrations/status** ‚Äî —Å—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –∏—Ö —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "google_auth": true,
  "yandex_auth": false
}
```

---

### **UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**

* **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**:

  * –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å –≤–∞–ª—é—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤.
  * –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–¥–µ–ª–æ–∫.
* **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:

  * –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ OAuth –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ.
  * –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
  * –ö–Ω–æ–ø–∫–∞ ¬´–û—Ç–∫–ª—é—á–∏—Ç—å¬ª –¥–ª—è –∫–∞–∂–¥–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
* **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:

  * –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ–± –∏–º–ø–æ—Ä—Ç–µ –∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ —Ü–µ–Ω–∞–º.

---

## 9.8. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### **GET /admin/dashboard** ‚Äî —Å–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–∏—Å—Ç–µ–º–µ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–±—ä—ë–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –ø–µ—Ä–∏–æ–¥.

**–î–æ—Å—Ç—É–ø:**
–¢–æ–ª—å–∫–æ **–∞–¥–º–∏–Ω**.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "total_users": 152,
  "active_users_last_7_days": 47,
  "total_positions": 320,
  "total_trades": 2540,
  "imports_last_7_days": 85
}
```

---

### **GET /admin/users** ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                   |
| -------- | ------ | -------------------------- |
| search   | string | –ü–æ–∏—Å–∫ –ø–æ email/username    |
| role     | string | `user` –∏–ª–∏ `admin`         |
| page     | int    | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã             |
| limit    | int    | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä. |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 1,
    "email": "user@example.com",
    "username": "TraderJoe",
    "role": "user",
    "created_at": "2025-07-15T09:00:00Z",
    "last_login": "2025-08-08T11:45:00Z"
  }
]
```

---

### **PATCH /admin/users/{id}/role** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∏–ª–∏ —Å–Ω—è—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "role": "admin"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "TraderJoe",
  "role": "admin"
}
```

---

### **DELETE /admin/users/{id}** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ–≥–æ –ø–æ–∑–∏—Ü–∏–∏, —Å–¥–µ–ª–∫–∏ –∏ –∑–∞–º–µ—Ç–∫–∏.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **GET /admin/imports** ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç—á—ë—Ç–æ–≤ –±—Ä–æ–∫–µ—Ä–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                         |
| ---------- | ------ | -------------------------------- |
| user\_id   | int    | –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é           |
| from\_date | date   | –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞                   |
| to\_date   | date   | –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞                    |
| status     | string | `draft`, `completed`, `canceled` |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 77,
    "user_id": 1,
    "report_type": "daily",
    "total_trades": 12,
    "status": "completed",
    "created_at": "2025-08-06T12:00:00Z"
  }
]
```

---

### **DELETE /admin/imports/{id}** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–£–¥–∞–ª—è–µ—Ç –∏–º–ø–æ—Ä—Ç –∏ –≤—Å–µ –µ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏).

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **GET /admin/logs** ‚Äî –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–µ–π—Å—Ç–≤–∏–π: –∏–º–ø–æ—Ä—Ç, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ               |
| ---------- | ------ | ---------------------- |
| user\_id   | int    | –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |
| action     | string | –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è           |
| from\_date | date   | –° –∫–∞–∫–æ–π –¥–∞—Ç—ã           |
| to\_date   | date   | –ü–æ –∫–∞–∫—É—é –¥–∞—Ç—É          |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 501,
    "user_id": 1,
    "action": "trade_update",
    "description": "–ò–∑–º–µ–Ω–µ–Ω–∞ —Ü–µ–Ω–∞ —Å–¥–µ–ª–∫–∏ ID 305",
    "created_at": "2025-08-08T14:10:00Z"
  }
]
```

---

### **UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω–∫–∏**

* –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç** (`/admin`) —Å –¥–æ—Å—Ç—É–ø–æ–º —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–æ–ª–∏ `admin`.
* –†–∞–∑–¥–µ–ª—ã:

  * **–ü–∞–Ω–µ–ª—å** (Dashboard) ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
  * **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** ‚Äî —Å–ø–∏—Å–æ–∫, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏, —É–¥–∞–ª–µ–Ω–∏–µ.
  * **–ò–º–ø–æ—Ä—Ç—ã** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∑–æ–∫ —Ñ–∞–π–ª–æ–≤.
  * **–õ–æ–≥–∏** ‚Äî –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π.
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞.

---

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —É –Ω–∞—Å —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç—ã **—Ä–∞–∑–¥–µ–ª—ã 9.1‚Äì9.8** —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ API.

---

## 9.9. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

---

### **GET /backup** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞—Ä—Ö–∏–≤ (ZIP) —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ø–æ–∑–∏—Ü–∏–∏, —Å–¥–µ–ª–∫–∏, –∑–∞–º–µ—Ç–∫–∏, –ø–ª–∞–Ω—ã "–ª–µ—Å–µ–Ω–∫–∏", –∏—Å—Ç–æ—Ä–∏—é –∏–º–ø–æ—Ä—Ç–æ–≤.
–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞ ‚Äî **JSON** (–≤ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å CSV/XLSX).

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "message": "Backup created successfully",
  "download_url": "https://server.com/backups/backup_2025-08-08T12-00-00.zip",
  "size_mb": 1.25
}
```

---

### **POST /backup/import** ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç ZIP-—Ñ–∞–π–ª, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ –≤ `/backup`, –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å **–ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –∏–ª–∏ **—á–∞—Å—Ç–∏—á–Ω–æ–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –∑–∞–º–µ—Ç–∫–∏ –∏–ª–∏ —Å–¥–µ–ª–∫–∏).

**–í—Ö–æ–¥ (multipart/form-data):**

* `file`: ZIP-—Ñ–∞–π–ª —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.
* `restore_mode` (string): `full` –∏–ª–∏ `partial`.
* `modules` (array, optional): –ø—Ä–∏ `partial` ‚Äî —Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π (`positions`, `trades`, `notes`, `ladder_plans`).

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "message": "Data restored successfully",
  "restored_modules": ["positions", "trades", "notes"]
}
```

---

### **GET /export/trades** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç —Å–¥–µ–ª–æ–∫ –≤ CSV

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í—ã–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Å–¥–µ–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ CSV-—Ñ–∞–π–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤ Excel/Google Sheets.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ         |
| ---------- | ------ | ---------------- |
| from\_date | date   | –° –∫–∞–∫–æ–π –¥–∞—Ç—ã     |
| to\_date   | date   | –ü–æ –∫–∞–∫—É—é –¥–∞—Ç—É    |
| instrument | string | –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–∫–µ—Ä—É |

**–û—Ç–≤–µ—Ç (200 OK):**
–û—Ç–¥–∞—ë—Ç —Ñ–∞–π–ª `trades_export.csv` —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:

```
–î–∞—Ç–∞ —Å–¥–µ–ª–∫–∏, –í—Ä–µ–º—è, –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –û–ø–µ—Ä–∞—Ü–∏—è, –ö–æ–ª-–≤–æ, –¶–µ–Ω–∞, –ö–æ–º–∏—Å—Å–∏—è, –ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–æ–∫, –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
```

---

### **GET /export/positions** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –ø–æ–∑–∏—Ü–∏–π –≤ CSV

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ CSV.

**–û—Ç–≤–µ—Ç (200 OK):**
–§–∞–π–ª `positions_export.csv` —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:

```
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ, –ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–æ–∫ %, –ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–æ–∫ ‚ÇΩ, –ó–∞–º–µ—Ç–∫–∞
```

---

### **UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞**

* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞.
* –î–ª—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ **7 –¥–Ω—è–º–∏** (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ).
* –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ("–í—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã").
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º** –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–≤–æ–¥–∫—É, —á—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è.
* –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö ‚Äî –ø—Ä–æ—Å—Ç–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–∫–∞—á–∞–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä.

---

## 9.10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API (MOEX –¥–ª—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫)

---

### **GET /market/quotes** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –ø–æ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–º —Ç–∏–∫–µ—Ä–∞–º —Å –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏ (MOEX).

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø          | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
| -------- | ------------ | ----- | ------------------------------------------ |
| tickers  | array/string | ‚úÖ     | –°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (`GAZP,SBER`) |
| board    | string       | ‚ùå     | –†—ã–Ω–æ–∫ (`TQBR` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π)                  |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "ticker": "GAZP",
    "last_price": 152.45,
    "price_change_percent": 1.25,
    "time": "2025-08-08T10:35:00Z"
  },
  {
    "ticker": "SBER",
    "last_price": 275.10,
    "price_change_percent": -0.42,
    "time": "2025-08-08T10:35:00Z"
  }
]
```

**–û—à–∏–±–∫–∏:**

* `400 Bad Request` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤ –ø—É—Å—Ç.
* `502 Bad Gateway` ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ API MOEX.

---

### **GET /market/quote/{ticker}** ‚Äî –∫–æ—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –æ–¥–Ω–æ–º—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –æ–¥–Ω–æ–π –∞–∫—Ü–∏–∏, –≤–∫–ª—é—á–∞—è —Ü–µ–Ω—É –æ—Ç–∫—Ä—ã—Ç–∏—è, –∑–∞–∫—Ä—ã—Ç–∏—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∑–∞ –¥–µ–Ω—å.

**–î–æ—Å—Ç—É–ø:**
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–û—Ç–≤–µ—Ç (200 OK):**

```json
{
  "ticker": "GAZP",
  "last_price": 152.45,
  "open_price": 150.00,
  "close_price": 151.20,
  "high_price": 153.00,
  "low_price": 149.80,
  "volume": 1250000,
  "price_change_percent": 1.25,
  "time": "2025-08-08T10:35:00Z"
}
```

---

### **GET /market/history/{ticker}** ‚Äî –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–ª—É—á–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–Ω –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø  | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| -------- | ---- | ----- | --------------------------------- |
| from     | date | ‚úÖ     | –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞                    |
| to       | date | ‚úÖ     | –ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞                     |
| interval | int  | ‚ùå     | –ò–Ω—Ç–µ—Ä–≤–∞–ª –≤ –º–∏–Ω—É—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á. 60) |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "date": "2025-08-01T10:00:00Z",
    "open": 148.00,
    "high": 149.20,
    "low": 147.80,
    "close": 149.00,
    "volume": 250000
  },
  {
    "date": "2025-08-01T11:00:00Z",
    "open": 149.00,
    "high": 150.25,
    "low": 148.90,
    "close": 150.00,
    "volume": 310000
  }
]
```

---

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

* –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π **ISS API –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏**.
* –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –≤ Redis –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö —Ü–µ–Ω, 1 —á–∞—Å –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö).
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ (Yahoo Finance, Alpha Vantage).

---

### **UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ **–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∑–∏—Ü–∏–∏.
* –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã (–∑–µ–ª—ë–Ω–∞—è/–∫—Ä–∞—Å–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞).
* –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥ –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –≤ –≥—Ä–∞—Ñ–∏–∫.

---

## 9.11. –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

### **GET /activity-log** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∂—É—Ä–Ω–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏–π

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–ª–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Äî –¥–ª—è –∞–¥–º–∏–Ω–∞) –≤ —Å–∏—Å—Ç–µ–º–µ.
–ñ—É—Ä–Ω–∞–ª —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: –≤—Ö–æ–¥, –≤—ã—Ö–æ–¥, —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π, —Å–¥–µ–ª–æ–∫, –∑–∞–º–µ—Ç–æ–∫, –∞ —Ç–∞–∫–∂–µ –∏–º–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤.

**–î–æ—Å—Ç—É–ø:**

* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è.
* –ê–¥–º–∏–Ω ‚Äî –≤–∏–¥–∏—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø  | –û–±—è–∑. | –û–ø–∏—Å–∞–Ω–∏–µ                                                                               |
| ------------ | ---- | ----- | -------------------------------------------------------------------------------------- |
| user\_id     | int  | ‚ùå     | –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)                                                  |
| from\_date   | date | ‚ùå     | –° –∫–∞–∫–æ–π –¥–∞—Ç—ã                                                                           |
| to\_date     | date | ‚ùå     | –ü–æ –∫–∞–∫—É—é –¥–∞—Ç—É                                                                          |
| action\_type | str  | ‚ùå     | –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è (`login`, `import`, `trade_create`, `trade_update`, `note_delete` –∏ —Ç.–¥.) |
| limit        | int  | ‚ùå     | –ö–æ–ª-–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)                                                       |
| page         | int  | ‚ùå     | –°—Ç—Ä–∞–Ω–∏—Ü–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)                                                              |

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": 1,
    "timestamp": "2025-08-08T10:35:00Z",
    "user": {
      "id": 5,
      "username": "TraderJoe"
    },
    "action_type": "trade_create",
    "description": "–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–¥–µ–ª–∫–∞ –ø–æ GAZP: –ø–æ–∫—É–ø–∫–∞ 100 —à—Ç. –ø–æ 149.00",
    "metadata": {
      "trade_id": 305,
      "instrument": "GAZP",
      "quantity": 100,
      "price": 149.00
    }
  },
  {
    "id": 2,
    "timestamp": "2025-08-08T10:40:00Z",
    "user": {
      "id": 5,
      "username": "TraderJoe"
    },
    "action_type": "note_add",
    "description": "–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–º–µ—Ç–∫–∞ –∫ –ø–æ–∑–∏—Ü–∏–∏ GAZP",
    "metadata": {
      "note_id": 77,
      "position_id": 101
    }
  }
]
```

---

### **POST /activity-log** ‚Äî –∑–∞–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏—è –≤ –∂—É—Ä–Ω–∞–ª

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ú–µ—Ç–æ–¥ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π.
–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ API, –≤–ª–µ–∫—É—â–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤ —Å–µ—Ä–≤–∏—Å–Ω–æ–º —Å–ª–æ–µ.

**–í—Ö–æ–¥ (JSON body):**

```json
{
  "user_id": 5,
  "action_type": "import",
  "description": "–ò–º–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞ –°–±–µ—Ä monthly report",
  "metadata": {
    "report_id": 54,
    "total_trades": 12
  }
}
```

**–û—Ç–≤–µ—Ç:**
`201 Created`

---

### **DELETE /activity-log/{id}** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏–∑ –∂—É—Ä–Ω–∞–ª–∞.
**–î–æ—Å—Ç—É–ø:** —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω.

**–û—Ç–≤–µ—Ç:**
`204 No Content`

---

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

* –¢–∞–±–ª–∏—Ü–∞ `activity_log` —Å –ø–æ–ª—è–º–∏:
  `id`, `timestamp`, `user_id`, `action_type`, `description`, `metadata` (JSONB).
* –•—Ä–∞–Ω–µ–Ω–∏–µ `metadata` –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSONB –≤ PostgreSQL –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏–π —á–µ—Ä–µ–∑ middleware –∏–ª–∏ —Å–µ—Ä–≤–∏—Å-—Å–ª–æ–π, —á—Ç–æ–±—ã –Ω–µ –∑–∞–±—ã—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å.
* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞—É–¥–∏—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ELK Stack) –Ω–∞ –±—É–¥—É—â–∏—Ö —ç—Ç–∞–ø–∞—Ö.

---

### **UX-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –î–ª—è –∞–¥–º–∏–Ω–∞ ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ —Ç–∏–ø—É –¥–µ–π—Å—Ç–≤–∏—è.
* –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚Äú–ú–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è‚Äù).
* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Äú—á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ‚Äù –æ–ø–∏—Å–∞–Ω–∏—è (`description`) + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏ (`metadata`).

---